---
layout:     post
title:      C++多态&内存管理总结
subtitle:   C++多态和内存管理的总结
date:       2018-02-16
author:     YangGuang
header-img: img/post-bg-github-cup.jpg
catalog: true
tags:
    - C++
---

# C++多态
### 静态类型 & 动态类型
首先C++ 有静态类型与动态类型，静态类型就是对象定义时多类型，动态类型就是对象所指向的类型。

实现多态首先需要继承，其次就是最重要的动态绑定。

动态绑定所需的条件
1. 对象必须是虚函数
2. 基类指针保存着

当C++ 类里面包涵了虚函数时，编译器会创建一个虚函数表，这个虚函数表就是一个用来保存函数地址的数组，里面保存着当前类的虚函数地址，每一次类都有且只有一个虚函数表，为了能够访问这个虚函数表每个类都有一个指向自己虚函数表都指针（vptr）。
最后基类指针或者引用保存子类对象地址，就可以实现多态


# C++ 内存管理
### C++内存分配
在C++中，内存分成5个区，他们分别是堆、栈、自由存储区、全局/静态存储区和常量存储区。
1）栈：栈里面保存着函数里面的创建的变量。
2）堆：堆保存着用new申请的内存，使用delete释放所	申请的内存。
3）自由存储区：保存着用malloc申请的内存，使用free	释放申请的内存。
4）全局/静态存储区：用来保存全局/静态变量，在C里面	全局变量还分为未初始化和初始化。
5）常量存储区：保存着常量，不能被修改。

### 堆和栈的区别
1. 管理方式不同（栈系统自动管理，堆需要用户手动管	理）
2. 空间大小不同（堆大栈小，32位堆可达到4G内存，而	栈大约只有1M大小）
3. 分配效率不同（堆慢栈快）
4. 碎片产生不同（频繁new/delete会造成内存空间不连续，就会导致出现大量碎片。而栈不会出现这样的问题。)
